---
description:
globs:
alwaysApply: true
---
# MCP Plugin Architecture

This plugin follows a structured architecture for tools and resources:

## Tools
- Tools are defined in the [tools/](mdc:tools) directory
- Each tool follows a registration pattern with name, description, and handler
- Tools should use the logger from [tools/logging.ts](mdc:tools/logging.ts)
- Tools for file access should use VaultFileResource

## Resources
- Resources provide standardized access to Obsidian data
- The [tools/vault_file_resource.ts](mdc:tools/vault_file_resource.ts) provides the foundation for file access
- Resources must be registered with the MCP server
- Resources should handle daily notes through [tools/daily_note_utils.ts](mdc:tools/daily_note_utils.ts)

## Daily Notes Support
- Daily notes follow the special scheme: `daily:///<date>` (e.g., `daily:///today`, `daily:///2024-01-15`)
- Support aliases: "today", "yesterday", "tomorrow"

## Server Implementation
- MCP server uses `StreamableHTTPServerTransport` from `@modelcontextprotocol/sdk`
- Server is defined in [mcp_server.ts](mdc:mcp_server.ts)
- HTTP endpoint at `/mcp` handles JSON-RPC requests with Bearer token authentication
